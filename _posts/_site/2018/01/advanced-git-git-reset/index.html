<p>In <a href="https://blog.mjurtz.com/2017/09/getting-started-git/">one of my earliest posts</a>, I wrote an introduction to version control, more specifically: git. The topic I will cover today extends this article by a topic which is actually not that complicated. However, people seem to find it hard to deal with it and use it as a highway to StackOverflow.</p>

<p>I talk about <em>git reset</em>. This command can be used to reset changes in your working area or to remove staged files from the index. I think that one of the problems here is the context-dependent functionality of the command. Another problem is the commands potentially disruptive character, since it can lead to data loss.</p>

<h2 id="moving-the-current-branch">Moving the current Branch</h2>

<p>In general, you can split the commands functionality into two separate parts. First, the command will move the current branch. Let’s look at an example. In my current project, I’ve made some changes that I’d like to reset. In my example, my current commit <strong>25a5d0e</strong> contains unwanted information and I’d like to return back to the state at commit <strong>ea02e01</strong>.</p>

<p><img src="/assets/2018/git_reset_move_head.png" alt="Git Reset - Move HEAD" /></p>

<p>Of course, this is a very simple example, git reset is not restricted to a single branch. I’d also like to mention, that this operation will lead to commits that don’t belong to any branch. In this case, git will automatically detect and delete them using its garbage collection mechanism.</p>

<h2 id="copy-files">Copy Files</h2>

<p>As I mentioned earlier, the reset command moves the current branch (which is actually a pointer to a specific commit). The second part of its functionality is to optionally copy contents from the repository to the index (also known as <em>staging area</em>) and the working area.</p>

<p>To specify where contents should be copied to, you can use the parameters <span style="text-decoration: underline;"><em>–hard</em></span>, <em>–mixed</em> or <em>–soft</em>. First of these copies the contents from the repository to both the index, and the working area. Appending <em>–mixed</em> will lead to the contents being copied only to the index, not to the working area. When using <em>git reset</em> without any parameters, this is what will be applied. The last option is to use <em>–soft</em>, which will prevent any content from being copied. In this case, only the branch-movement-part of the command will be executed.</p>

<p><img src="/assets/2018/git_reset_copy_files.png" alt="Git Reset - Move HEAD" /></p>

<h2 id="conclusion">Conclusion</h2>

<p>Working with <em>git reset</em> is easier than you think. Also, it’s definitely helpful to always think of the two components. Doing so, there is another a really cool feature that you may already have seen: You can use <em>git reset</em> to unstage files. Alternatively to <em>git rm –cached</em>, you can use <em>git reset HEAD –mixed</em>, which will overwrite the staged files.</p>
