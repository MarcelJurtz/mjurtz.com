---
layout: post
title: Touch Controls for Unity Game Development
date: 2017-11-15 18:00:46.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Android
- Game development
tags:
- ".NET"
- Android
- App
- CSharp
- Development
- GameDev
- Programming
- Unity
meta:
  _edit_last: '2'
  _adinserter_block_exceptions: ''
  _yoast_wpseo_focuskw_text_input: Android
  _yoast_wpseo_focuskw: Android
  _yoast_wpseo_metadesc: In this article, I discuss the basics of implementing touch
    controls to a Unity game, which allows us to publish games for smartphones / Android.
  _yoast_wpseo_linkdex: '79'
  _yoast_wpseo_content_score: '90'
  _yoast_wpseo_primary_category: '23'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1510860434;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:361;}i:1;a:1:{s:2:"id";i:461;}i:2;a:1:{s:2:"id";i:485;}}}}
  _wpas_done_all: '1'
author:
  login: Marcel
  email: marcel@mjurtz.com
  display_name: Marcel Jurtz
  first_name: Marcel
  last_name: Jurtz
---
<p>Some time ago, I created <a href="https://github.com/MarcelJurtz/Escape">this game</a> (<a href="https://marceljurtz.github.io/Escape-Web/">online playable version</a>) in Unity, and I wanted to be able to play it on my Android phone. Since the input options on the smartphone are slightly different from those on the pc, a certain amount of adjustments were necessary. I won't go over the specific details on the game mechanics, you can check out these on GitHub, they are described in the README file. However, the basic concept of the game isÂ  the movement of a cube to one of the directions up, down, left or right. The information about which direction to use is displayed on the screen.</p>
<p>On a PC, you would use your arrow keys to move the cube. Using Android, you don't have any keys available. Instead, there is a touchscreen. So you need a way to receive information about user interaction on the touchscreen. Therefore, I've created the script <em>GestureRecognizer</em>, which can be seen in the listing below.</p>
<p>The script fetches user input at the first contact, which is saved in the <em>isTouching</em> boolean. The script checks every frame, if the user is touching the screen. If so, it also checks if the user has moved the position on the screen. I use <em>Input.touches</em> for this, since it is an array which contains information about the movement on the screen. All that is left to do now is to check, in which direction the user moved his finger.</p>
<p>However, the immediate evaluation is difficult, as the player will often carry out a minimal movement in a different direction than the intended one (just try it out). For this reason, I have defined a minimum distance that must be exceeded before the script actually communicates the movement. The current movements distance is saved in <em>SwipeDelta</em>, the minimal distance is saved in <em>SWIPE_TOLERANCE</em>, which is assigned 200 units.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="csharp">using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class GestureRecognizer : MonoBehaviour {

    private bool tap, swipeLeft, swipeRight, swipeUp, swipeDown;
    private bool isTouching = false;
    private Vector2 swipeStart, swipeDelta;
    private const int SWIPE_TOLERANCE = 200;

    private void resetSwipePosition()
    {
        swipeStart = Vector2.zero;
        swipeDelta = Vector2.zero;
        isTouching = false;
    }

    public Vector2 SwipeDelta { get { return swipeDelta; } }
    public bool SwipeLeft { get { return swipeLeft; } }
    public bool SwipeRight { get { return swipeRight; } }
    public bool SwipeUp { get { return swipeUp; } }
    public bool SwipeDown { get { return swipeDown; } }
    public bool Tap { get { return tap; } }

    private void Update()
    {
        tap = false;
        swipeLeft = false;
        swipeRight = false;
        swipeUp = false;
        swipeDown = false;

        // Mobile Inputs
        if(Input.touches.Length &gt; 0)
        {
            if(Input.touches[0].phase == TouchPhase.Began)
            {
                tap = true;
                isTouching = true;
                swipeStart = Input.touches[0].position;
            }
            else if(Input.touches[0].phase == TouchPhase.Ended || Input.touches[0].phase == TouchPhase.Ended)
            {
                isTouching = false;
                resetSwipePosition();
            }
        }

        // Distance Calculation
        swipeDelta = Vector2.zero;
        if(isTouching &amp;&amp; Input.touches.Length &gt; 0)
        {
            swipeDelta = Input.touches[0].position - swipeStart;         
        }

        // Swipe Recognition
        if(swipeDelta.magnitude &gt; SWIPE_TOLERANCE)
        {
            float x = swipeDelta.x;
            float y = swipeDelta.y;

            if(Mathf.Abs(x) &gt; Mathf.Abs(y))
            {
                // Left or Right
                if(x &lt; 0)
                {
                    swipeLeft = true;
                }
                else
                {
                    swipeRight = true;
                }
            }
            else
            {
                // Up or Down
                if (y &lt; 0)
                {
                    swipeDown = true;
                }
                else
                {
                    swipeUp = true;
                }
            }

            resetSwipePosition();
        }
    }
}</pre>
<p>To be able to move the cube with this script, it needs to be added to the Update() method of the cubes controller script. To support both touchscreen and keyboards, I simply add an <em>or</em> operator to the if statement:</p>
<pre class="EnlighterJSRAW" data-enlighter-language="null">if (Input.GetKeyDown(KeyCode.UpArrow) || swipeControls.SwipeUp)
{
    // ...
}</pre>
<p>SwipeControls is simply an instance of the above created <em>GestureRecognizer</em> class.</p>
<p>And that's basically it! To release a game for android, you have to select the <em>Android</em> entry under <em>File</em> - <em>Build Settings</em> and then click <em>Build</em>. If you have an emulator running or your phone (with USB-debugging enabled) connected to your PC, you can directly run the game on the device. Note, that for building apps for Android, you'll need to have the Android SDK installed, which can be downloaded directly in Unity.</p>
