<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.88.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Using LESS with ASP.NET Core &middot; Marcel Jurtz</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://www.mjurtz.com/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://www.mjurtz.com/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://www.mjurtz.com/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://www.mjurtz.com/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <a href="https://www.mjurtz.com/">
                <h1>Marcel Jurtz</h1>
            </a>
            <p class="lead">
                 Notes and thoughts on software development 
            </p>
        </div>

        <nav>
            <ul class="sidebar-nav">
                <li><a href="https://www.mjurtz.com/">Home</a> </li>
                <li><a href="/about/"> About </a></li><li><a href="/imprint/"> Imprint / Impressum </a></li><li><a href="/privacy/"> Privacy / Datenschutz </a></li>
            </ul>
        </nav>

    </div>
</aside>
    <main class="content container">
    <div class="post">
  <h1>Using LESS with ASP.NET Core</h1>
  <time datetime=2018-12-23T06:00:00Z class="post-date">Sun, Dec 23, 2018</time>
  <p>I have already written about the advantages of a CSS preprocessor like LESS in this post. Today I want to show you how you can easily implement support for such a preprocessor in your ASP.NET Core project. I will use Gulp to create the ability to write LESS files and convert them to CSS files so that they can be integrated into the ASP.NET Core application. Finally, I will automate the whole thing so that the LESS file is converted without manual interaction on every build.</p>
<p>To convert from LESS to CSS I use Gulp. Gulp is a workflow automation tool for JavaScript. This allows me to implement the whole thing per npm into my ASP.NET core project. I don&rsquo;t have any node packages in use yet, so I need a new package.json file first. I don&rsquo;t create it with Visual Studio because I didn&rsquo;t get it to work correctly. You are welcome to try it, but if it doesn&rsquo;t work either, try the following:</p>
<p>Start the setup wizard using npm init, and fill in the configuration as needed. Then I need the following dependencies, which will be added to the dev-dependencies section. After adding them. the area will look something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#e6db74">&#34;devDependencies&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> { 
  <span style="color:#f92672">&#34;gulp&#34;</span>: <span style="color:#e6db74">&#34;3.9.1&#34;</span>, 
  <span style="color:#f92672">&#34;gulp-less&#34;</span>: <span style="color:#e6db74">&#34;3.3.2&#34;</span>, 
  <span style="color:#f92672">&#34;gulp-clean-css&#34;</span>: <span style="color:#e6db74">&#34;3.9.0&#34;</span> 
} 
</code></pre></div><p>Now I need to setup gulp using a new file called gulpfile.js:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gulp</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;gulp&#34;</span>), 
    <span style="color:#a6e22e">cleanCss</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;gulp-clean-css&#34;</span>), 
    <span style="color:#a6e22e">less</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;gulp-less&#34;</span>); 
 

<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">task</span>(<span style="color:#e6db74">&#34;default&#34;</span>, <span style="color:#66d9ef">function</span> () { 
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">src</span>(<span style="color:#e6db74">&#39;Styles/*.less&#39;</span>) 
        .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">less</span>()) 
        .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">cleanCss</span>({ <span style="color:#a6e22e">compatibility</span><span style="color:#f92672">:</span> â€¯<span style="color:#e6db74">&#39;ie8&#39;</span> })) 
        .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">dest</span>(<span style="color:#e6db74">&#39;wwwroot/css&#39;</span>)); 
}); 
</code></pre></div><p>And that&rsquo;s about it, actually. If your LESS files are in a directory other than &ldquo;Styles&rdquo;, you have to change the configuration accordingly. You can now start the conversion with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">node_modules\.bin\gulp 
</code></pre></div><p>Now I would like to automate this, because I do not want to manually execute the conversion everytime I changed something. To achieve that, I edit the .csproj file of my project by hand and add the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;Target</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;MyPreCompileTarget&#34;</span> <span style="color:#a6e22e">BeforeTargets=</span><span style="color:#e6db74">&#34;Build&#34;</span><span style="color:#f92672">&gt;</span> 
  <span style="color:#f92672">&lt;Exec</span> <span style="color:#a6e22e">WorkingDirectory=</span><span style="color:#e6db74">&#34;$(ProjectDir)&#34;</span> <span style="color:#a6e22e">Command=</span><span style="color:#e6db74">&#34;node_modules\.bin\gulp&#34;</span> <span style="color:#f92672">/&gt;</span> 
<span style="color:#f92672">&lt;/Target&gt;</span> 
</code></pre></div><p>That&rsquo;s it. That&rsquo;s it. The conversion process is now fully automated and you can define and use your LESS files without worrying about the conversion.</p>

</div>


    </main>

    
      
    
  </body>
</html>
