<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Building a Chess Game in Unity</title>
  <meta name="description" content="In this post, I’ll be covering the basics of building a simple chess game in Unity and C#.The MVP of this project will be a fully playable 3D chess game for ...">
  
  <meta name="author" content="Marcel Jurtz">
  <meta name="copyright" content="&copy; Marcel Jurtz 2018">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  

  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://blog.mjurtz.com/2017/11/building-a-chess-game-in-unity/">
  <link rel="alternate" type="application/rss+xml" title="Marcel Jurtz" href="http://blog.mjurtz.com/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <!--
    <a href="/" class="logo">
      
      <span>Marcel Jurtz</span>
      
    </a>
  -->
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <!--
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <li class="nav-link"><a href="/posts/">Posts</a>
          
        
          
        
          
          <li class="nav-link"><a href="/typography/">Typography</a>
          
        
          
          <li class="nav-link"><a href="/tag/gamedev/">gamedev</a>
          
        
          
          <li class="nav-link"><a href="/tag/unity/">unity</a>
          
        
          
          <li class="nav-link"><a href="/tag/git/">git</a>
          
        
          
          <li class="nav-link"><a href="/tag/programming/">programming</a>
          
        
          
          <li class="nav-link"><a href="/tag/tools/">tools</a>
          
        
          
          <li class="nav-link"><a href="/tag/android/">android</a>
          
        
          
          <li class="nav-link"><a href="/tag/app/">app</a>
          
        
          
          <li class="nav-link"><a href="/tag/baseball/">baseball</a>
          
        
          
          <li class="nav-link"><a href="/tag/development/">development</a>
          
        
          
          <li class="nav-link"><a href="/tag/editor/">editor</a>
          
        
          
          <li class="nav-link"><a href="/tag/bitcache/">bitcache</a>
          
        
          
          <li class="nav-link"><a href="/tag/bitcoin/">bitcoin</a>
          
        
          
          <li class="nav-link"><a href="/tag/cryptocurrency/">cryptocurrency</a>
          
        
          
          <li class="nav-link"><a href="/tag/dotnet/">dotnet</a>
          
        
          
          <li class="nav-link"><a href="/tag/asp-dotnet/">asp-dotnet</a>
          
        
          
          <li class="nav-link"><a href="/tag/csharp/">csharp</a>
          
        
          
          <li class="nav-link"><a href="/tag/rest/">rest</a>
          
        
          
          <li class="nav-link"><a href="/tag/servicestack/">servicestack</a>
          
        
          
          <li class="nav-link"><a href="/tag/software/">software</a>
          
        
          
          <li class="nav-link"><a href="/tag/windows/">windows</a>
          
        
          
          <li class="nav-link"><a href="/tag/efficiency/">efficiency</a>
          
        
          
          <li class="nav-link"><a href="/tag/productivity/">productivity</a>
          
        
          
          <li class="nav-link"><a href="/tag/network/">network</a>
          
        
          
          <li class="nav-link"><a href="/tag/p2p/">p2p</a>
          
        
          
          <li class="nav-link"><a href="/tag/syncthing/">syncthing</a>
          
        
          
          <li class="nav-link"><a href="/tag/xamarin/">xamarin</a>
          
        
          
          <li class="nav-link"><a href="/tag/clean-code/">clean-code</a>
          
        
          
          <li class="nav-link"><a href="/tag/design/">design</a>
          
        
          
          <li class="nav-link"><a href="/tag/layout/">layout</a>
          
        
          
          <li class="nav-link"><a href="/tag/sideproject/">sideproject</a>
          
        
          
          <li class="nav-link"><a href="/tag/dotnet-core/">dotnet-core</a>
          
        
          
          <li class="nav-link"><a href="/tag/linux/">linux</a>
          
        
          
          <li class="nav-link"><a href="/tag/3d-printing/">3d-printing</a>
          
        
          
          <li class="nav-link"><a href="/tag/raspberry-pi/">raspberry-pi</a>
          
        
          
          <li class="nav-link"><a href="/tag/email/">email</a>
          
        
          
          <li class="nav-link"><a href="/tag/encryption/">encryption</a>
          
        
          
          <li class="nav-link"><a href="/tag/self/">self</a>
          
        
          
          <li class="nav-link"><a href="/tag/blog/">blog</a>
          
        
          
          <li class="nav-link"><a href="/tag/web/">web</a>
          
        
          
          <li class="nav-link"><a href="/tag/ruby/">ruby</a>
          
        
          
          <li class="nav-link"><a href="/tag/javascript/">javascript</a>
          
        
          
          <li class="nav-link"><a href="/tag/jekyll/">jekyll</a>
          
        
          
          <li class="nav-link"><a href="/tag/motivation/">motivation</a>
          
        
          
          <li class="nav-link"><a href="/tag/discipline/">discipline</a>
          
        
          
          <li class="nav-link"><a href="/tag/fitness/">fitness</a>
          
        
          
          <li class="nav-link"><a href="/tag/asp-net/">asp.net</a>
          
        
          
          <li class="nav-link"><a href="/tag/css/">css</a>
          
        
          
          <li class="nav-link"><a href="/tag/html/">html</a>
          
        
          
          <li class="nav-link"><a href="/tag/tfs/">tfs</a>
          
        
          
          <li class="nav-link"><a href="/tag/svn/">svn</a>
          
        
          
          <li class="nav-link"><a href="/tag/docker/">docker</a>
          
        
          
          <li class="nav-link"><a href="/tag/containers/">containers</a>
          
        
          
          <li class="nav-link"><a href="/tag/book/">book</a>
          
        
          
          <li class="nav-link"><a href="/tag/review/">review</a>
          
        
          
          <li class="nav-link"><a href="/tag/ferriss/">ferriss</a>
          
        
          
          <li class="nav-link"><a href="/tag/life/">life</a>
          
        
          
          <li class="nav-link"><a href="/tag/business/">business</a>
          
        
          
          <li class="nav-link"><a href="/tag/methodology/">methodology</a>
          
        
          
          <li class="nav-link"><a href="/tag/scrum/">scrum</a>
          
        
          
          <li class="nav-link"><a href="/tag/management/">management</a>
          
        
          
          <li class="nav-link"><a href="/tag/agile/">agile</a>
          
        
          
          <li class="nav-link"><a href="/tag/project/">project</a>
          
        
          
          <li class="nav-link"><a href="/tag/kanban/">kanban</a>
          
        
          
          <li class="nav-link"><a href="/tag/pattern/">pattern</a>
          
        
          
          <li class="nav-link"><a href="/tag/ioc/">IoC</a>
          
        
          
          <li class="nav-link"><a href="/tag/di/">DI</a>
          
        
          
          <li class="nav-link"><a href="/tag/csharp/">CSharp</a>
          
        
          
          <li class="nav-link"><a href="/tag/learn/">learn</a>
          
        
          
          <li class="nav-link"><a href="/tag/prototyping/">prototyping</a>
          
        
          
          <li class="nav-link"><a href="/tag/typescript/">typescript</a>
          
        
          
          <li class="nav-link"><a href="/tag/cross-platform/">cross-platform</a>
          
        
          
          <li class="nav-link"><a href="/tag/self-disciplin/">self-disciplin</a>
          
        
          
          <li class="nav-link"><a href="/tag/sports/">sports</a>
          
        
          
          <li class="nav-link"><a href="/tag/running/">running</a>
          
        
          
          <li class="nav-link"><a href="/tag/challenge/">challenge</a>
          
        
          
          <li class="nav-link"><a href="/category/game-development/">game-development</a>
          
        
          
          <li class="nav-link"><a href="/category/tools/">tools</a>
          
        
          
          <li class="nav-link"><a href="/category/android/">android</a>
          
        
          
          <li class="nav-link"><a href="/category/cryptocurrency/">cryptocurrency</a>
          
        
          
          <li class="nav-link"><a href="/category/csharp/">CSharp</a>
          
        
          
          <li class="nav-link"><a href="/category/csharp/">csharp</a>
          
        
          
          <li class="nav-link"><a href="/category/productivity/">productivity</a>
          
        
          
          <li class="nav-link"><a href="/category/tips/">tips</a>
          
        
          
          <li class="nav-link"><a href="/category/xamarin/">xamarin</a>
          
        
          
          <li class="nav-link"><a href="/category/hobby/">hobby</a>
          
        
          
          <li class="nav-link"><a href="/category/security/">security</a>
          
        
          
          <li class="nav-link"><a href="/category/linux/">linux</a>
          
        
          
          <li class="nav-link"><a href="/category/blog/">blog</a>
          
        
          
          <li class="nav-link"><a href="/category/windows/">windows</a>
          
        
          
          <li class="nav-link"><a href="/category/life/">life</a>
          
        
          
          <li class="nav-link"><a href="/category/web/">web</a>
          
        
          
          <li class="nav-link"><a href="/category/programming/">programming</a>
          
        
          
          <li class="nav-link"><a href="/category/development/">development</a>
          
        
          
          <li class="nav-link"><a href="/category/books/">books</a>
          
        
          
          <li class="nav-link"><a href="/category/learn/">learn</a>
          
        
          
          <li class="nav-link"><a href="/category/running/">running</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    -->
      <ul id="js-navigation-menu" class="navigation-menu-show">
        <li class="nav-link"><a href="/">Home</a></li>
        <li class="nav-link"><a href="/about/">About</a></li>
        <li class="nav-link"><a href="/posts/">Posts</a></li>
        <li class="nav-link"><a href="/feed.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">Building a Chess Game in Unity</h1>
      <p class="info">by <strong>Marcel Jurtz</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">November 13, 2017</div>
  <div class="post-categories">
  in 
    
    <a href="/category/csharp">Csharp</a>, 
    
  
    
    <a href="/category/game-development">Game-development</a>
    
  
  </div>
</section>

<article class="post-content">
  <p>In this post, I’ll be covering the basics of building a simple chess game in Unity and C#.</p>

<p>The MVP of this project will be a fully playable 3D chess game for two players. Each character will only be able to make moves that comply with the rules. After slaying a king, the game is reset. To improve the game, menu scenes, statistics and a simple AI will be added later. The final project and its source code is available on my <a href="https://github.com/MarcelJurtz/Chess">GitHub-profile</a>.</p>

<p>Since this article became quite large, I split it into different parts. Use one of the following links to jump directly to the relevant section.</p>

<ol>
  <li><a href="#loading_assets">Loading the Assets</a> for programmers lacking 3d-modeling skills</li>
  <li><a href="#setting_up_scene">Setting up the Scene</a> to create a basic setting</li>
  <li><a href="#drawing_chessboard">Drawing the Chessboard</a> to make testing easier</li>
  <li><a href="#initialize_characters">Initializing the Characters</a> and move them to their default location</li>
  <li><a href="#movement_control">Movement Control</a> to differentiate between selecting and moving characters</li>
  <li><a href="#board_highlighting">Board Highlighting</a> to mark all fields to which can be moved</li>
  <li><a href="#obey_rules">Obey the Rules</a> to implement each characters movesets</li>
</ol>

<h2 id="loading_assets">Loading the Assets</h2>

<p>I think it is quite common that programmers are bad designers. At least that’s the case for me, which is why I try to get the graphic elements for my chess game from the Asset Store. I found <a href="https://www.assetstore.unity3d.com/en/#!/content/93014">Arcane Cyber’s Classic Chess Set</a> to look pretty nice and decided to give it a shot. This asset pack contains three different types of figures (metallic, marble &amp; plastic), although the board is only available in the marble look.</p>

<h2 id="setting_up_scene">Setting up the Scene</h2>

<p>I start with creating a simple scene, which contains a camera and a light source, as well as an empty GameObject for the chessboard. The chessboards prefab is attached to this gameobject as a child element. Another child element is a simple plane, which I use for testing. For the time being, I deactivate the chess board itself to get a better overview.</p>

<p>As soon as the scene itself is finished, I start with the actual scripting. The parent element of the chess field receives a script called BoardManager, which manages the whole game.</p>

<h2 id="drawing_chessboard">Drawing the Chessboard</h2>

<p>The BoardManager has several tasks, which I’ll be covering in the following. First of all, the manager loads all the characters at their starting positions. Then, possible movements are calculated and the observance of the alternating moves is checked.</p>

<p>I’ll start by drawing a chessboard manually. This helps to test the correct movements and positioning inside the squares of the chess board. The method is called in the scripts Start()-method.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">DrawChessBoard</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Vector3</span> <span class="n">widthLine</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="m">8</span><span class="p">;</span>
    <span class="n">Vector3</span> <span class="n">heightLine</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="m">8</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">8</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="n">Vector3</span> <span class="n">start</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">i</span><span class="p">;</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span> <span class="p">+</span> <span class="n">widthLine</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="m">8</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">start</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">j</span><span class="p">;</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span> <span class="p">+</span> <span class="n">heightLine</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>This function generates an 8×8 grid, which symbolizes the chess board and is now used to simplify the positioning of the chess pieces. Before I will position the game pieces next, I want to add a function to hold the current mouse position on the chess board. This function will be implemented by displaying a cross on the labelled field.</p>

<p>The currently selected position will be identified by two integer values, which represent X and Y position, ranging from 0 to 7. These two variables are defined at class level and have a default value of -1, which indicates that no field on the chessboard is selected. This value should also be assumed if the mouse position is outside of the chess field. To update the selection, I move the call of <em>DrawChessboard()</em> from the <em>Start()</em>– to the <em>Update()</em>-method.</p>

<p>I use a Raycast to check if the mouse is inside the board. I also assign the chessboard GameObject its own layer called “ChessPlane”, which is checked for availability by the Raycast.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">UpdateSelection</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="n">RaycastHit</span> <span class="n">hit</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">raycastDistance</span> <span class="p">=</span> <span class="m">25.0f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="nf">Raycast</span><span class="p">(</span><span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="nf">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">),</span> <span class="k">out</span> <span class="n">hit</span><span class="p">,</span> <span class="n">raycastDistance</span><span class="p">,</span> <span class="n">LayerMask</span><span class="p">.</span><span class="nf">GetMask</span><span class="p">(</span><span class="s">"ChessPlane"</span><span class="p">)))</span>
    <span class="p">{</span>
        <span class="n">selectionX</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">selectionY</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">selectionX</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
        <span class="n">selectionY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>This method is also called in the <em>Update()</em>-method. As you can see in the snippet above, only the X and Y variables are set in the method, but no corresponding changes are made to the graphical user interface. I implement this functionality in the <em>DrawChessBoard()</em>-method to maintain a clear code structure through the related functional area. So, after drawing the board itself, I use the following code to display the current mouse position. By this instruction, two further lines are drawn, which are represented in the form of a cross on the chess board.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">if</span> <span class="p">(</span><span class="n">selectionX</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">selectionY</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">selectionY</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">selectionX</span><span class="p">,</span>
        <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="p">(</span><span class="n">selectionY</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="p">(</span><span class="n">selectionX</span> <span class="p">+</span> <span class="m">1</span><span class="p">));</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">selectionY</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="p">(</span><span class="n">selectionX</span> <span class="p">+</span> <span class="m">1</span><span class="p">),</span>
        <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="p">(</span><span class="n">selectionY</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="n">selectionX</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h2 id="initialize_characters">Initializing the Characters</h2>

<p>Next, the chess pieces are initialized and positioned at their respective locations. For this purpose I need information about the different game pieces, so a prefab for each piece has to be created. The package from the Asset Store I used already has prebuilt assets, but you’ll want to adjust the scaling and rotation.</p>

<p>I would like to create a class for each type of character so that I can deduce the different possible movements later on. But this is not needed at the moment, so I create a superclass which describes each character and is later used as a parent class of the different characters.</p>

<p>I’ve already done some preliminary work here, which is why this class needs an explanation. Each figure has a position, described by two-dimensional coordinates (X and Y). In addition, each figure is either white or black and should have information about the positions to which it may move. The differentiation between white and black figures is realized by a boolean. Alternatively, an enumeration could be used here as well, which I think would be better with regard to readability, but the boolean offers the advantage of comparing this property with a corresponding property of the <em>BoardManager</em> to check the current active color and switching it with the != operator. I have provided the class with the keyword <em>abstract</em>, which prevents the use of the class itself, so only the subclasses can be used.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ChessFigure</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">CurrentX</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">CurrentY</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">isWhite</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SetPosition</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">CurrentX</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">CurrentY</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span><span class="m">8</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>So much for it. Next, a class is created for each type of character, inherited from the superclass. Since these classes will only overwrite the possible movements, they do not contain any logic of their own at the moment. Remember to adjust the different prefabs after adding the script using the public property “isWhite” and set the check mark in the editor to the white figures.</p>

<p>To assign the different prefabs to BoardManager, I’ll now add a public list of the GameObject type and add the different prefabs to it in the editor. The order of the instances is not important, but I recommend that you build a basic logic to make the instantiation as easy to read as possible later on. In my case, I use the following order:</p>

<ol>
  <li>King (White)</li>
  <li>Queen (White)</li>
  <li>Rook (White)</li>
  <li>Bishop (White)</li>
  <li>Knight (White)</li>
  <li>Pawn (White)</li>
  <li>King (Black)</li>
  <li>Queen (Black)</li>
  <li>Rook (Black)</li>
  <li>Bishop (Black)</li>
  <li>Knight (Black)</li>
  <li>Pawn (Black)</li>
</ol>

<p>To instantiate the different figures correctly, different functionalities are needed. The figure must start on the correct field, but also take the right position (centered) within the field. To calculate the center of a field, I created a method GetTileCenter (). This requires the information about the size of a field, which I have stored in a constant called TILE_SIZE (which is equal to 1). I also calculate the center using an offset (TILE_OFFSET) of 0.5. The parameters correspond to the coordinates of the respective figure on the chess board, which are represented by X and Y (0-7).</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="n">Vector3</span> <span class="nf">GetTileCenter</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Vector3</span> <span class="n">origin</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
    <span class="n">origin</span><span class="p">.</span><span class="n">x</span> <span class="p">+=</span> <span class="p">(</span><span class="n">TILE_SIZE</span> <span class="p">*</span> <span class="n">x</span><span class="p">)</span> <span class="p">+</span> <span class="n">TILE_OFFSET</span><span class="p">;</span>
    <span class="n">origin</span><span class="p">.</span><span class="n">z</span> <span class="p">+=</span> <span class="p">(</span><span class="n">TILE_SIZE</span> <span class="p">*</span> <span class="n">y</span><span class="p">)</span> <span class="p">+</span> <span class="n">TILE_OFFSET</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">origin</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>This method is now called by another one, which is used to instantiate the figures. Here too, I have already implemented another functionality, which I must briefly explain. <em>ChessFigurePositions</em> is a two-dimensional array of the type GameObject, which holds information about the positions of figures on the board. When an entry of this is equal to null, that means that no figure is located on that position. <em>ActiveFigures</em> is list of the type GameObject, used to keep track of all characters that are currently alive.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">GameObject</span> <span class="n">go</span> <span class="p">=</span> <span class="nf">Instantiate</span><span class="p">(</span><span class="n">chessFigures</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nf">GetTileCenter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">chessFigures</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">)</span> <span class="k">as</span> <span class="n">GameObject</span><span class="p">;</span>
    <span class="n">go</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="nf">SetParent</span><span class="p">(</span><span class="n">transform</span><span class="p">);</span>
    <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="p">=</span> <span class="n">go</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">ChessFigure</span><span class="p">&gt;();</span>
    <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">].</span><span class="nf">SetPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">activeFigures</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">go</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>With this method, it is now possible to instantiate game pieces, but there is no information on which position belongs to which figure. I create another method called <em>SpawnAllChessFigures()</em>, which handles this task. This is then called in the <em>Start()</em> method of the script and will later also be used to implement the functionality to reset the game. The only difficulty here lies in the correct positioning of the game pieces, which is determined by the parameters of the spawn function.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">SpawnAllChessFigures</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// White
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// King
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Queen
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Rook
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Rook
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Bishop
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Bishop
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Knight
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// Knight
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>

    <span class="c1">// Black
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// King
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Queen
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Rook
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Rook
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Bishop
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Bishop
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Knight
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">);</span> <span class="c1">// Knight
</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="nf">SpawnChessFigure</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h2 id="movement_control">Movement Control</h2>

<p>After all characters have been added to the board, they need to be able to change their position. I splt this functionality into two parts. First of all, it must be possible to select a character by clicking on it. Afterwards, the selected character must be able to move to another location (considering its allowed moves) as far as it is the figures colors turn.</p>

<p>To implement this functionality, I have created two new methods in the <em>BoardManager</em>: <em>SelectChessFigure()</em> and <em>MoveChessFigure()</em>. To keep track of the currently active color, I have created a class wide boolean-variable named <em>isWhiteTurn</em>, which can be compared to the <em>isWhite</em> property of the individual characters. The call of these two functions is in the <em>Update()</em>-method and listens for a mouse click.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">if</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetMouseButtonDown</span><span class="p">(</span><span class="m">0</span><span class="p">))</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">selectionX</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">selectionY</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">selectedFigure</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="nf">SelectChessFigure</span><span class="p">(</span><span class="n">selectionX</span><span class="p">,</span> <span class="n">selectionY</span><span class="p">);</span>
        <span class="k">else</span> <span class="nf">MoveChessFigure</span><span class="p">(</span><span class="n">selectionX</span><span class="p">,</span> <span class="n">selectionY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>I have created another boolean-variable inside the method, which is used to monitor whether the selected figure can move at all. If this is not the case, the figure should not be selectable, so that a different figure can be selected directly afterwards. Otherwise, the selection of a field to which the piece should moved follows. In case of no other possible movement a double click on a new figure would be required, which is circumvented by this implementation. So, the task of the nested for-loop is simply to check if the chosen figure is able to move.</p>

<p>If the figure is able to move, all available target fields should be highlighted. I have outsourced this functionality to another class, which I will discuss next. The array containing information on the available movements is also filled here. This calculation takes place in the different classes of the individual game pieces, which will also be discussed soon.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">SelectChessFigure</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">].</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhiteTurn</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kt">bool</span> <span class="n">hasAtLeastOneMove</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="n">allowedMoves</span> <span class="p">=</span> <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">].</span><span class="nf">PossibleMove</span><span class="p">();</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">allowedMoves</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="n">hasAtLeastOneMove</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="n">i</span> <span class="p">=</span> <span class="m">7</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(!</span><span class="n">hasAtLeastOneMove</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="n">selectedFigure</span> <span class="p">=</span> <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">];</span>
    <span class="n">BoardHighlighting</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="nf">HighlightAllowedMoves</span><span class="p">(</span><span class="n">allowedMoves</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The <em>MoveChessFigure()</em>-Method is implemented quite simple. If there is already a different colored figure on the target field, it will be destroyed. If this figure happens to be a king, the <em>EndGame-()</em>-method is called, which resets the game. Afterwards, the board layout and position properties of the selected piece are updated.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">MoveChessFigure</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">allowedMoves</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">])</span>
    <span class="p">{</span>
        <span class="n">ChessFigure</span> <span class="n">c</span> <span class="p">=</span> <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhiteTurn</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">activeFigures</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
            <span class="nf">Destroy</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="nf">GetType</span><span class="p">()</span> <span class="p">==</span> <span class="k">typeof</span><span class="p">(</span><span class="n">King</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nf">EndGame</span><span class="p">();</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">selectedFigure</span><span class="p">.</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">selectedFigure</span><span class="p">.</span><span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="n">selectedFigure</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="nf">GetTileCenter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
        <span class="n">selectedFigure</span><span class="p">.</span><span class="nf">SetPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
        <span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="p">=</span> <span class="n">selectedFigure</span><span class="p">;</span>
        <span class="n">isWhiteTurn</span> <span class="p">=</span> <span class="p">!</span><span class="n">isWhiteTurn</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">BoardHighlighting</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="nf">HideHighlights</span><span class="p">();</span>
    <span class="n">selectedFigure</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Another detail that is visible in the implementation of the <em>EndGame()</em>-method is the access to the <em>BoardHighlighting</em>-class. This was implemented as a singleton, whereby only one instance of the class can exist, which is accessible from every area of the game.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="k">void</span> <span class="nf">EndGame</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isWhiteTurn</span><span class="p">)</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"White team won!"</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Black team won!"</span><span class="p">);</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="n">GameObject</span> <span class="n">go</span> <span class="k">in</span> <span class="n">activeFigures</span><span class="p">)</span>
        <span class="nf">Destroy</span><span class="p">(</span><span class="n">go</span><span class="p">);</span>

    <span class="n">isWhiteTurn</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">BoardHighlighting</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="nf">HideHighlights</span><span class="p">();</span>
    <span class="nf">SpawnAllChessFigures</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<h2 id="board_highlighting">Board Highlighting</h2>

<p>The <em>BoardHighlighting</em>-class is used to <span>emphasise </span>possible target positions. I use a simple prefab in the form of a square plane, which is instantiated on the potential target fields. The possible fields are set by a parameter in form of a two-dimensional boolean array. The highlight objects are additionally managed in a list, which makes it easy to perform a reset between moves.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">BoardHighlighting</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">BoardHighlighting</span> <span class="n">Instance</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">highlightPrefab</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;</span> <span class="n">highlights</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Instance</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="n">highlights</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">GameObject</span> <span class="nf">GetHighlightObject</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">GameObject</span> <span class="n">go</span> <span class="p">=</span> <span class="n">highlights</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="n">g</span> <span class="p">=&gt;</span> <span class="p">!</span><span class="n">g</span><span class="p">.</span><span class="n">activeSelf</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">go</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">go</span> <span class="p">=</span> <span class="nf">Instantiate</span><span class="p">(</span><span class="n">highlightPrefab</span><span class="p">);</span>
            <span class="n">highlights</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">go</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">go</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">HighlightAllowedMoves</span><span class="p">(</span><span class="kt">bool</span><span class="p">[,]</span> <span class="n">moves</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">moves</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="n">GameObject</span> <span class="n">go</span> <span class="p">=</span> <span class="nf">GetHighlightObject</span><span class="p">();</span>
                    <span class="n">go</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">go</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="m">0.5f</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">j</span> <span class="p">+</span> <span class="m">0.5f</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">HideHighlights</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">GameObject</span> <span class="n">go</span> <span class="k">in</span> <span class="n">highlights</span><span class="p">)</span> <span class="n">go</span><span class="p">.</span><span class="nf">SetActive</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>And that’s it! Almost. The only thing missing is the assignment of the possible moves to the different pieces, which will be covered next.</p>

<h2 id="obey_rules">Obeying the Rules</h2>

<p>The simplest character is also the most difficult to implement, so I’ll start with this one. Generally, the pawn can only move forward one field per turn. However, there are special regulations: if the pawn is located on its start field, then he’s allowed to move two fields forward. He can also not move forward if there is another character on that field. Finally, the pawn may only attack diagonally.</p>

<p>Because the direction in which the figures move is different, I implement this logic for both colors separately:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Pawn</span> <span class="p">:</span> <span class="n">ChessFigure</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">];</span>
        <span class="n">ChessFigure</span> <span class="n">c</span><span class="p">,</span> <span class="n">c2</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">isWhite</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Diagonal Left
</span>
            <span class="k">if</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">!=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">7</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span><span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span><span class="m">1</span><span class="p">];</span>
                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Diagonal Right
</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentX</span> <span class="p">!=</span> <span class="m">7</span> <span class="p">&amp;&amp;</span> <span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">7</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Forward
</span>
            <span class="k">if</span><span class="p">(</span><span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">7</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="c1">// Two Steps Forward
</span>
            <span class="k">if</span><span class="p">(</span><span class="n">CurrentY</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="n">c2</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">2</span><span class="p">];</span>
                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">c2</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">2</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">// Diagonal Left
</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentX</span> <span class="p">!=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">c</span><span class="p">.</span><span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Diagonal Right
</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentX</span> <span class="p">!=</span> <span class="m">7</span> <span class="p">&amp;&amp;</span> <span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">c</span><span class="p">.</span><span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Forward
</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentY</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="c1">// Two Steps Forward
</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentY</span> <span class="p">==</span> <span class="m">6</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">];</span>
                <span class="n">c2</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">2</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">c2</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">2</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The next character I’m going to implement will be the bishop. The bishop can run any number of fields diagonally, as long as no other figures stand in the way.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Bishop</span> <span class="p">:</span> <span class="n">ChessFigure</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">];</span>

        <span class="n">ChessFigure</span> <span class="n">c</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>

        <span class="c1">// Top Left
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">--;</span>
            <span class="n">j</span><span class="p">++;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">j</span> <span class="p">&gt;=</span> <span class="m">8</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Top Right
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">++;</span>
            <span class="n">j</span><span class="p">++;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">8</span> <span class="p">||</span> <span class="n">j</span> <span class="p">&gt;=</span> <span class="m">8</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Bottom Left
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">--;</span>
            <span class="n">j</span><span class="p">--;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&lt;</span> <span class="m">0</span> <span class="p">||</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Bottom Right
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">++;</span>
            <span class="n">j</span><span class="p">--;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">8</span> <span class="p">||</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The rook is implemented in a similar way to the bishop, but the movement here is straight (vertical and horizontal) instead of diagonal.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Rook</span> <span class="p">:</span> <span class="n">ChessFigure</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">];</span>
        <span class="n">ChessFigure</span> <span class="n">c</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

        <span class="c1">// Left
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">--;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Right
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">++;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">8</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Forward
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">++;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">8</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Back
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentY</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="p">--;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Another complicated looking figure is the knight. The knight moves two fields straight ahead in one direction, followed by a 90 degree turn and a further movement by one field in this direction. Alternatively, the movement of a single field can be done first, followed by the two-field-movement. Figures that are on the fields within the movement sequence are irrelevant. However, the knight has a positive side: the movements do not have to be implemented separately for both colors.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Knight</span> <span class="p">:</span> <span class="n">ChessFigure</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">];</span>

        <span class="c1">// Up / Left
</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">2</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>

        <span class="c1">// Up / Right
</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>

        <span class="c1">// Down / Left
</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">2</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">2</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>

        <span class="c1">// Down / Right
</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">2</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>
        <span class="nf">KnightMove</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="k">ref</span> <span class="n">r</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">KnightMove</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ChessFigure</span> <span class="n">c</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="m">8</span> <span class="p">&amp;&amp;</span> <span class="n">y</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The possible movements of the king correspond to two fields in any direction, which I have implemented as follows:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">King</span> <span class="p">:</span> <span class="n">ChessFigure</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span><span class="p">[,]</span> <span class="nf">PossibleMove</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">bool</span><span class="p">[,]</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">bool</span><span class="p">[</span><span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">];</span>

        <span class="n">ChessFigure</span> <span class="n">c</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>

        <span class="c1">// Top
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">CurrentY</span> <span class="p">&lt;</span> <span class="m">7</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">k</span> <span class="p">&lt;</span> <span class="m">3</span><span class="p">;</span> <span class="n">k</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">i</span><span class="p">++;</span>
            <span class="p">}</span> 
        <span class="p">}</span>

        <span class="c1">// Bottom
</span>
        <span class="n">i</span> <span class="p">=</span> <span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
        <span class="n">j</span> <span class="p">=</span> <span class="n">CurrentY</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">CurrentY</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">k</span> <span class="p">&lt;</span> <span class="m">3</span><span class="p">;</span> <span class="n">k</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">i</span><span class="p">++;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Left
</span>
        <span class="k">if</span><span class="p">(</span><span class="n">CurrentX</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Right
</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">CurrentX</span> <span class="p">&lt;</span> <span class="m">7</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">c</span> <span class="p">=</span> <span class="n">BoardManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">ChessFigurePositions</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">isWhite</span> <span class="p">!=</span> <span class="n">isWhite</span><span class="p">)</span> <span class="n">r</span><span class="p">[</span><span class="n">CurrentX</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">CurrentY</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>And last but not least, the queen’s movements are still missing. These seem to be quite complex again, but here you can simply combine the already created movements of rook and bishop, which is why I don’t separately add a snippet of the source code for the queens implementation.</p>

<p>Now that’s it! The functionality of the MVP defined at the beginning is fully implemented. I will now try to implement a simple AI, which will help you to play the game without disturbing social interaction. Stay tuned!</p>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/development">development</a>,&nbsp;<a href="/tag/gamedev">gamedev</a>,&nbsp;<a href="/tag/programming">programming</a>,&nbsp;<a href="/tag/unity">unity</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Building+a+Chess+Game+in+Unity&url=http%3A%2F%2Fblog.mjurtz.com%2F2017%2F11%2Fbuilding-a-chess-game-in-unity%2F&via=MarcelJurtz"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('http://blog.mjurtz.com/2017/11/building-a-chess-game-in-unity/') + '&title=Building a Chess Game in Unity'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Marcel Jurtz</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <!--
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
        
        
          <li class="nav-link"><a href="/typography/">Typography</a>
        
        
        
          <li class="nav-link"><a href="/tag/gamedev/">gamedev</a>
        
        
        
          <li class="nav-link"><a href="/tag/unity/">unity</a>
        
        
        
          <li class="nav-link"><a href="/tag/git/">git</a>
        
        
        
          <li class="nav-link"><a href="/tag/programming/">programming</a>
        
        
        
          <li class="nav-link"><a href="/tag/tools/">tools</a>
        
        
        
          <li class="nav-link"><a href="/tag/android/">android</a>
        
        
        
          <li class="nav-link"><a href="/tag/app/">app</a>
        
        
        
          <li class="nav-link"><a href="/tag/baseball/">baseball</a>
        
        
        
          <li class="nav-link"><a href="/tag/development/">development</a>
        
        
        
          <li class="nav-link"><a href="/tag/editor/">editor</a>
        
        
        
          <li class="nav-link"><a href="/tag/bitcache/">bitcache</a>
        
        
        
          <li class="nav-link"><a href="/tag/bitcoin/">bitcoin</a>
        
        
        
          <li class="nav-link"><a href="/tag/cryptocurrency/">cryptocurrency</a>
        
        
        
          <li class="nav-link"><a href="/tag/dotnet/">dotnet</a>
        
        
        
          <li class="nav-link"><a href="/tag/asp-dotnet/">asp-dotnet</a>
        
        
        
          <li class="nav-link"><a href="/tag/csharp/">csharp</a>
        
        
        
          <li class="nav-link"><a href="/tag/rest/">rest</a>
        
        
        
          <li class="nav-link"><a href="/tag/servicestack/">servicestack</a>
        
        
        
          <li class="nav-link"><a href="/tag/software/">software</a>
        
        
        
          <li class="nav-link"><a href="/tag/windows/">windows</a>
        
        
        
          <li class="nav-link"><a href="/tag/efficiency/">efficiency</a>
        
        
        
          <li class="nav-link"><a href="/tag/productivity/">productivity</a>
        
        
        
          <li class="nav-link"><a href="/tag/network/">network</a>
        
        
        
          <li class="nav-link"><a href="/tag/p2p/">p2p</a>
        
        
        
          <li class="nav-link"><a href="/tag/syncthing/">syncthing</a>
        
        
        
          <li class="nav-link"><a href="/tag/xamarin/">xamarin</a>
        
        
        
          <li class="nav-link"><a href="/tag/clean-code/">clean-code</a>
        
        
        
          <li class="nav-link"><a href="/tag/design/">design</a>
        
        
        
          <li class="nav-link"><a href="/tag/layout/">layout</a>
        
        
        
          <li class="nav-link"><a href="/tag/sideproject/">sideproject</a>
        
        
        
          <li class="nav-link"><a href="/tag/dotnet-core/">dotnet-core</a>
        
        
        
          <li class="nav-link"><a href="/tag/linux/">linux</a>
        
        
        
          <li class="nav-link"><a href="/tag/3d-printing/">3d-printing</a>
        
        
        
          <li class="nav-link"><a href="/tag/raspberry-pi/">raspberry-pi</a>
        
        
        
          <li class="nav-link"><a href="/tag/email/">email</a>
        
        
        
          <li class="nav-link"><a href="/tag/encryption/">encryption</a>
        
        
        
          <li class="nav-link"><a href="/tag/self/">self</a>
        
        
        
          <li class="nav-link"><a href="/tag/blog/">blog</a>
        
        
        
          <li class="nav-link"><a href="/tag/web/">web</a>
        
        
        
          <li class="nav-link"><a href="/tag/ruby/">ruby</a>
        
        
        
          <li class="nav-link"><a href="/tag/javascript/">javascript</a>
        
        
        
          <li class="nav-link"><a href="/tag/jekyll/">jekyll</a>
        
        
        
          <li class="nav-link"><a href="/tag/motivation/">motivation</a>
        
        
        
          <li class="nav-link"><a href="/tag/discipline/">discipline</a>
        
        
        
          <li class="nav-link"><a href="/tag/fitness/">fitness</a>
        
        
        
          <li class="nav-link"><a href="/tag/asp-net/">asp.net</a>
        
        
        
          <li class="nav-link"><a href="/tag/css/">css</a>
        
        
        
          <li class="nav-link"><a href="/tag/html/">html</a>
        
        
        
          <li class="nav-link"><a href="/tag/tfs/">tfs</a>
        
        
        
          <li class="nav-link"><a href="/tag/svn/">svn</a>
        
        
        
          <li class="nav-link"><a href="/tag/docker/">docker</a>
        
        
        
          <li class="nav-link"><a href="/tag/containers/">containers</a>
        
        
        
          <li class="nav-link"><a href="/tag/book/">book</a>
        
        
        
          <li class="nav-link"><a href="/tag/review/">review</a>
        
        
        
          <li class="nav-link"><a href="/tag/ferriss/">ferriss</a>
        
        
        
          <li class="nav-link"><a href="/tag/life/">life</a>
        
        
        
          <li class="nav-link"><a href="/tag/business/">business</a>
        
        
        
          <li class="nav-link"><a href="/tag/methodology/">methodology</a>
        
        
        
          <li class="nav-link"><a href="/tag/scrum/">scrum</a>
        
        
        
          <li class="nav-link"><a href="/tag/management/">management</a>
        
        
        
          <li class="nav-link"><a href="/tag/agile/">agile</a>
        
        
        
          <li class="nav-link"><a href="/tag/project/">project</a>
        
        
        
          <li class="nav-link"><a href="/tag/kanban/">kanban</a>
        
        
        
          <li class="nav-link"><a href="/tag/pattern/">pattern</a>
        
        
        
          <li class="nav-link"><a href="/tag/ioc/">IoC</a>
        
        
        
          <li class="nav-link"><a href="/tag/di/">DI</a>
        
        
        
          <li class="nav-link"><a href="/tag/csharp/">CSharp</a>
        
        
        
          <li class="nav-link"><a href="/tag/learn/">learn</a>
        
        
        
          <li class="nav-link"><a href="/tag/prototyping/">prototyping</a>
        
        
        
          <li class="nav-link"><a href="/tag/typescript/">typescript</a>
        
        
        
          <li class="nav-link"><a href="/tag/cross-platform/">cross-platform</a>
        
        
        
          <li class="nav-link"><a href="/tag/self-disciplin/">self-disciplin</a>
        
        
        
          <li class="nav-link"><a href="/tag/sports/">sports</a>
        
        
        
          <li class="nav-link"><a href="/tag/running/">running</a>
        
        
        
          <li class="nav-link"><a href="/tag/challenge/">challenge</a>
        
        
        
          <li class="nav-link"><a href="/category/game-development/">game-development</a>
        
        
        
          <li class="nav-link"><a href="/category/tools/">tools</a>
        
        
        
          <li class="nav-link"><a href="/category/android/">android</a>
        
        
        
          <li class="nav-link"><a href="/category/cryptocurrency/">cryptocurrency</a>
        
        
        
          <li class="nav-link"><a href="/category/csharp/">CSharp</a>
        
        
        
          <li class="nav-link"><a href="/category/csharp/">csharp</a>
        
        
        
          <li class="nav-link"><a href="/category/productivity/">productivity</a>
        
        
        
          <li class="nav-link"><a href="/category/tips/">tips</a>
        
        
        
          <li class="nav-link"><a href="/category/xamarin/">xamarin</a>
        
        
        
          <li class="nav-link"><a href="/category/hobby/">hobby</a>
        
        
        
          <li class="nav-link"><a href="/category/security/">security</a>
        
        
        
          <li class="nav-link"><a href="/category/linux/">linux</a>
        
        
        
          <li class="nav-link"><a href="/category/blog/">blog</a>
        
        
        
          <li class="nav-link"><a href="/category/windows/">windows</a>
        
        
        
          <li class="nav-link"><a href="/category/life/">life</a>
        
        
        
          <li class="nav-link"><a href="/category/web/">web</a>
        
        
        
          <li class="nav-link"><a href="/category/programming/">programming</a>
        
        
        
          <li class="nav-link"><a href="/category/development/">development</a>
        
        
        
          <li class="nav-link"><a href="/category/books/">books</a>
        
        
        
          <li class="nav-link"><a href="/category/learn/">learn</a>
        
        
        
          <li class="nav-link"><a href="/category/running/">running</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    -->
    <ul class="pages">
        <li class="nav-link"><a href="/">Home</a></li>
        <li class="nav-link"><a href="/about/">About</a></li>
        <li class="nav-link"><a href="/posts/">Posts</a></li>
        <li class="nav-link"><a href="https://mjurtz.com/Impressum.html">Impressum</a></li>
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:marcel@mjurtz.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">marcel@mjurtz.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/MarcelJurtz" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">MarcelJurtz</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/MarcelJurtz" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">MarcelJurtz</span>
            </a>
          </li>
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <form action="/search.html" method="get">
        <label for="search_box">Search Posts</label>
        <input type="text" id="search_box" name="query">
        <input type="submit" value="search">
      </form>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-118762636-1', 'auto');
  ga('set','anonymizeIp',true);
  ga('send', 'pageview', {
    'page': '/2017/11/building-a-chess-game-in-unity/',
    'title': 'Building a Chess Game in Unity'
  });
</script>



  </body>

</html>
